### IP-адресация и подсети: Основные концепции и примеры решений

---

#### 1. **Основные понятия**

- **Перевод десятичной записи IP в двоичную**:
  Для преобразования IP-адреса в двоичный формат можно использовать следующий код:
  ```python
  '.'.join(f'{x:08b}' for x in [192, 168, 10, 66])
  # Результат: '11000000.10101000.00001010.01000010'
  ```

- **Адрес сети**:
  - Начальная часть IP-адресов в подсети совпадает.
  - Адрес сети определяется как результат побитового "И" (&) между IP-адресом и маской подсети.

- **Маска подсети**:
  - Маска записывается как последовательность единиц и нулей (например, `11111111.11111111.11111100.00000000`).
  - Также может быть представлена как количество единиц (`/22`).

---

#### 2. **Основные функции модуля `ipaddress`**

- **`ip_network(address, strict=True)`**:
  - Создает объект сети на основе переданного адреса и маски.
  - Если `strict=False`, то можно указать любой IP-адрес вместо адреса сети, и адрес сети будет рассчитан автоматически.

- **`ip_address(address)`**:
  - Создает объект IP-адреса для выполнения операций с конкретными адресами.

- **`net.num_addresses`**:
  - Возвращает общее количество IP-адресов в сети (включая адрес сети и широковещательный адрес).

- **`net.netmask`**:
  - Возвращает маску сети в стандартной форме (например, `255.255.255.0`).

- **`net[0]` и `net[-1]`**:
  - `net[0]` — первый IP-адрес в сети (адрес сети).
  - `net[-1]` — последний IP-адрес в сети (широковещательный адрес).

- **`int(ip)`**:
  - Преобразует IP-адрес в целое число для выполнения арифметических операций.

- **`f'{ip:b}'`**:
  - Преобразует IP-адрес в двоичную строку для анализа структуры адреса.

---

### Примеры решений задач

#### №1. **Адрес сети для IP 135.12.171.214 и маски 255.255.248.0**
```python
from ipaddress import *

net = ip_network('135.12.171.214/255.255.248.0', strict=False)
print(net)  # Выводит адрес сети
```

---

#### №2. **Третий байт маски для IP 220.128.112.142 и адреса сети 220.128.96.0**
```python
from ipaddress import *

for mask in range(33):
    net = ip_network(f'220.128.112.142/{mask}', strict=False)
    if str(net.network_address) == '220.128.96.0':
        print(net, net.netmask)  # Выводит маску
        break
```

---

#### №3. **Наибольшее значение третьего байта маски для IP в одной сети**
```python
from ipaddress import *

for mask in range(33):
    net1 = ip_network(f'112.117.107.70/{mask}', strict=False)
    net2 = ip_network(f'112.117.121.80/{mask}', strict=False)
    if net1 == net2:
        print(net1, net1.netmask)  # Выводит маску
```

---

#### №4. **Минимальное количество единиц в маске для разных подсетей**
```python
from ipaddress import *

for mask in range(33):
    net1 = ip_network(f'157.127.182.76/{mask}', strict=False)
    net2 = ip_network(f'157.127.190.80/{mask}', strict=False)
    if net1 != net2:
        print(mask, net1, net2)  # Выводит минимальную маску
        break
```

---

#### №5. **Число адресов при маске 255.255.254.0**
```python
from ipaddress import *

net = ip_network('0.0.0.0/255.255.254.0')
print(net.num_addresses - 2)  # Вычитаем адрес сети и широковещательный адрес
```

---

#### №6. **Наибольшее количество адресов для IP 108.133.75.91**
```python
from ipaddress import *

max_addresses = 0
best_net = None

for mask in range(33):
    net = ip_network(f'108.133.75.91/{mask}', strict=False)
    if net.num_addresses > max_addresses:
        max_addresses = net.num_addresses
        best_net = net

print(best_net, max_addresses)
```

---

#### №7. **Количество IP с "111" для сети 184.178.54.144/255.255.255.240**
```python
from ipaddress import *

k = 0
net = ip_network('184.178.54.144/255.255.255.240')

for ip in net:
    if '111' in f'{int(ip):032b}':  # Проверяем наличие "111" в двоичной записи
        k += 1

print(k)
```

---

#### №8. **Номер компьютера в сети для IP 192.168.156.235**
```python
from ipaddress import *

net = ip_network('192.168.156.235/255.255.255.240', strict=False)
ip1 = ip_address('192.168.156.235')
ip2 = ip_address('192.168.156.224')  # Адрес сети

print(int(ip1) - int(ip2))  # Номер компьютера в сети
```

---

#### №9. **Наибольшее количество единиц в маске для узла 238.237.149.255**
```python
from ipaddress import *

ip = ip_address('238.237.149.255')

for mask in range(33):
    net = ip_network(f'238.237.149.255/{mask}', strict=False)
    if net[0] < ip < net[-1]:  # Проверяем, что IP находится внутри диапазона
        print(mask, net)
```

---

#### №10. **Количество значений A для сети 207.0.A.167 и маски 255.255.255.192**
```python
from ipaddress import *

k = 0

for A in range(256):
    ip = ip_address(f'207.0.{A}.167')
    net = ip_network(f'{ip}/255.255.255.192', strict=False)
    if all(f'{x:032b}'.count('0') > f'{x:032b}'.count('1') for x in net) and net[0] < ip < net[-1]:
        k += 1

print(k)
```
